function World(path_image){
    this.background_color = BACKGROUND_COLOR;
    this.height =  SCREEN_HEIGHT;
    this.width = SCREEN_WIDTH;
    this.tile_columns = this.width / TILE_SIZE; // 28 columnas
    this.tile_rows = this.height / TILE_SIZE; //31 filas
    this.graphic_map = [
    //       00, 01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27
    /*00*/   25, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 24,
    /*01*/   27, 76, 76, 76, 76, 76, 76, 43, 42, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 24, 25, 76, 76, 76, 76, 76, 26,
    /*02*/   27, 76, 42, 12, 12, 43, 76, 17, 16, 76, 50, 38, 38, 38, 38, 38, 38, 38, 43, 76, 17, 16, 76, 42, 38, 43, 76, 26,
    /*03*/   27, 76, 17, 76, 76, 55, 76, 17, 16, 76, 17, 76, 76, 76, 76, 76, 76, 76, 16, 76, 17, 16, 76, 17, 76, 16, 76, 26,
    /*04*/   27, 76, 19, 38, 38, 18, 76, 17, 16, 76, 17, 50, 38, 38, 38, 38, 38, 17, 16, 76, 17, 16, 76, 44, 38, 45, 76, 26,
    /*05*/   27, 76, 76, 76, 76, 76, 76, 17, 16, 76, 17, 16, 76, 76, 76, 76, 76, 17, 16, 76, 17, 16, 76, 76, 76, 76, 76, 26,
    /*06*/   27, 76, 50, 51, 76, 42, 38, 45, 16, 76, 17, 16, 76, 42, 38, 43, 76, 17, 16, 76, 17, 44, 38, 43, 76, 42, 38, 26,
    /*07*/   27, 76, 54, 55, 76, 49, 38, 38, 18, 76, 44, 45, 76, 17, 76, 16, 76, 44, 45, 76, 44, 38, 38, 45, 76, 17, 76, 26,
    /*08*/   27, 76, 54, 55, 76, 76, 76, 76, 76, 76, 76, 76, 76, 17, 76, 16, 76, 76, 76, 76, 76, 76, 76, 76, 76, 17, 76, 26,
    /*09*/   27, 76, 54, 19, 38, 43, 76, 42, 38, 38, 38, 38, 38, 45, 76, 44, 38, 38, 38, 38, 38, 43, 76, 42, 38, 45, 76, 26,
    /*10*/   27, 76, 19, 12, 12, 45, 76, 44, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 45, 76, 44, 38, 38, 38, 26,
    /*11*/   27, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 28,
    /*12*/   29, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76,
    /*13*/   76, 25, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 26,
    /*14*/   76, 27, 76, 76, 76, 76, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 26,
    /*15*/   76, 27, 76, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 76, 76, 76, 76, 76, 26,
    /*16*/   76, 27, 76, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 76, 26,
    /*17*/   76, 27, 76, 76, 76, 76, 34, 34, 34, 54, 76, 76, 76, 76, 76, 76, 76, 76, 54, 34, 34, 34, 34, 34, 34, 34, 76, 26,
    /*18*/   76, 27, 76, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76, 34, 34, 34, 76, 76, 76, 76, 76, 28,
    /*19*/   76, 27, 76, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76,
    /*20*/   76, 27, 76, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 34,
    /*21*/   34, 28, 76, 34, 34, 76, 76, 54, 76, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76, 76, 76, 76, 76, 34, 34, 76, 76, 76,
    /*22*/   76, 76, 76, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 76, 34, 34, 34, 76, 76, 76, 36, 36, 36,
    /*23*/   34, 24, 76, 34, 34, 34, 34, 76, 34, 34, 76, 76, 76, 54, 76, 76, 76, 76, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76,
    /*24*/   76, 27, 76, 76, 76, 76, 76, 76, 76, 76, 76, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 76, 34, 34, 34, 34, 76,
    /*25*/   76, 27, 76, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 76, 34, 34, 34, 34, 24,
    /*26*/   76, 27, 76, 34, 34, 34, 34, 34, 34, 34, 76, 34, 34, 34, 34, 34, 34, 34, 34, 34, 76, 34, 76, 34, 34, 34, 34, 26,
    /*27*/   76, 27, 76, 76, 76, 76, 76, 76, 34, 34, 76, 34, 34, 34, 76, 76, 76, 76, 34, 34, 76, 34, 76, 76, 76, 76, 76, 26,
    /*28*/   76, 27, 76, 34, 34, 34, 34, 76, 34, 34, 76, 34, 34, 34, 76, 34, 34, 76, 34, 34, 76, 34, 34, 34, 34, 34, 76, 26,
    /*29*/   76, 27, 76, 76, 76, 76, 76, 76, 76, 76, 54, 76, 76, 76, 76, 34, 34, 76, 76, 76, 76, 76, 76, 76, 76, 76, 76, 26,
    /*30*/   76, 29, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 28,
    ];
    

    // 1: camino normal
    // 2: punto de decision
    // 3: punto de decision especial
    // 4: entrada home
    this.logical_map = [
    //       00,01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27
    /*00*/   0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    /*01*/   0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0,
    /*02*/   0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,
    /*03*/   0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,
    /*04*/   0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,
    /*05*/   0, 2, 1, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 2, 1, 2, 0,
    /*06*/   0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0,
    /*07*/   0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0,
    /*08*/   0, 1, 0, 0, 1, 1, 2, 1, 1, 2, 1, 1, 1, 0, 0, 0, 1, 1, 1, 2, 1, 2, 1, 1, 1, 0, 1, 0,
    /*09*/   0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0,
    /*10*/   0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0,
    /*11*/   0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 0,
    /*12*/   0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*13*/   0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*14*/   0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*15*/   0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0,
    /*16*/   0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0,
    /*17*/   0, 0, 1, 1, 1, 1, 0, 0, 0, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0,
    /*18*/   0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0,
    /*19*/   0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*20*/   0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*21*/   0, 0, 1, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
    /*22*/   1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 
    /*23*/   0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 2, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*24*/   0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,
    /*25*/   0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0,
    /*26*/   0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    /*27*/   0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0,
    /*28*/   0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0,
    /*29*/   0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
    /*30*/   0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    ];
    

    this.balls = new Balls();

    //this.path_image.crossOrigin = "Anonymous"
    
    this.path = document.createElement("canvas").getContext("2d"); 
    //this.path = document.getElementById("path").getContext("2d");
    this.path.imageSmoothingEnabled = false;
    this.path.canvas.width = path_image.width;
    this.path.canvas.height = path_image.height;
    this.path.drawImage(path_image,0,0, path_image.width, path_image.height);

    
}